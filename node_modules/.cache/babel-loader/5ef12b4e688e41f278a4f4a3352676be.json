{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ayettey\\\\Desktop\\\\sportpollv3\\\\src\\\\SportPoll.js\";\nimport test from \"./test-assignment\";\nimport React from 'react';\n\nclass SportPoll extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      away: \"\",\n      home: \"\"\n    };\n  }\n  /**\r\n   *\r\n   * @returns {*}\r\n   */\n  // Execution point for sport poll view;\n  // The render is inherit from React Component for rendering Element\n\n\n  render() {\n    return this.view();\n  } // The view function is function that display event object\n\n\n  view() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"bar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, \"Event \"), React.createElement(\"span\", {\n      id: \"teams_place_holder\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, \" \"), \" \", React.createElement(\"span\", {\n      id: \"score\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, \" \"), React.createElement(\"div\", {\n      className: \"vote\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      id: \"vote\",\n      type: \"button\",\n      value: \"Vote\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"sport_event\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      id: \"event_items\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }, \"Away\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, \"Home\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, \"Name\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, \"Group\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, \"Sport\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, \"State\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, \"Country\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, \"Created date\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"ID\")))))));\n  } //Store data in local storage\n\n\n  localSDB(value, teamIndex) {\n    if (typeof Storage !== \"undefined\") {\n      // Store\n      localStorage.setItem(\"team\", value); // Retrieve\n\n      if (teamIndex === 0) {\n        this.setState({\n          away: localStorage.getItem(\"team\")\n        });\n      } else {\n        this.setState({\n          home: localStorage.getItem(\"team\")\n        });\n      }\n    } else {\n      alert(\"Sorry, your browser does not support Web Storage...\");\n    }\n  } // The Event table data function query for Event data.\n\n\n  eventTableData(val) {\n    let eventItems = document.querySelector(\"#event_items\");\n    eventItems.innerHTML += \"\\n          <tr>\\n          <td title=\\\"click to select Away\\\" class=\\\"team\\\">\\n             \".concat(val.awayName, \"\\n          </td>\\n          <td title=\\\"click to select Home\\\" class = \\\"team\\\" >\\n             \").concat(val.group, \"\\n         \\n              </td>\\n              \\n               <td class = \\\"group\\\" >\\n                   \").concat(val.homeName, \"\\n              </td>\\n               \\n               <td class = \\\"name\\\" >\\n               \").concat(val.name, \"\\n              </td>\\n               <td class = \\\"sport_type\\\" >\\n               \").concat(val.sport, \"\\n              </td>\\n               <td class = \\\"state\\\" >\\n               \").concat(val.state, \"\\n              </td>\\n               <td class = \\\"home_name\\\" >\\n               \").concat(val.country, \"\\n              </td>\\n               <td class = \\\"create_date\\\" >\\n              \").concat(val.createdAt, \"\\n              </td>\\n              <td class = \\\"id\\\" >\\n                 \").concat(val.id, \"\\n              </td>\\n             \\n          </tr>\\n      \\n          \");\n  } //The execute database engine function query and prepare statement for the eventTableData function;\n\n\n  executeDBEngine() {\n    var eventList = \"\";\n\n    if (typeof Storage !== \"undefined\") {\n      // Store\n      localStorage.setItem(\"polls\", JSON.parse(JSON.stringify(test)));\n      eventList = localStorage.getItem(\"polls\");\n    }\n\n    let shuffle = Math.floor(Math.random() * Math.floor(5));\n    var state = [];\n    let index = 1;\n\n    for (let val of eventList) {\n      if (shuffle.valueOf() === 0 && val.sport === \"FOOTBALL\") {\n        this.eventTableData(val);\n        state[index] = val.state;\n        ++index;\n      } else if (shuffle.valueOf() === 1 && val.sport === \"SNOOKER\") {\n        this.eventTableData(val);\n        state[index] = val.state;\n        ++index;\n      } else if (shuffle.valueOf() === 2 && val.sport === \"HANDBALL\") {\n        this.eventTableData(val);\n        state[index] = val.state;\n        ++index;\n      } else if (shuffle.valueOf() === 3 && val.sport === \"ICE_HOCKEY\") {\n        this.eventTableData(val);\n        state[index] = val.state;\n        ++index;\n      } else if (shuffle.valueOf() === 4 && val.sport === \"TENNIS\") {\n        this.eventTableData(val);\n        state[index] = val.state;\n        ++index;\n      }\n    }\n\n    this.voteEngine(state);\n  } //The vote engine determines the poll winner or draw\n\n\n  voteEngine(state) {\n    let team = document.querySelectorAll(\".team\");\n    let teamCss = \"background-color:green; color:white\";\n    let vote = document.querySelector(\"#vote\");\n    let winner = document.querySelector(\"#teams_place_holder\");\n    let score = document.querySelector(\"#score\");\n    var awayEngine;\n    var homeEngine;\n    let count = 0;\n    let callThis = this;\n    team.forEach(function (el, key) {\n      el.addEventListener(\"click\", function (ev) {\n        el.style.cssText = teamCss;\n        ev.preventDefault();\n        ev.stopImmediatePropagation();\n        awayEngine = Math.floor(Math.random() * Math.floor(5));\n        homeEngine = Math.floor(Math.random() * Math.floor(5));\n        const rows = document.querySelectorAll('tr');\n        const rowsArray = Array.from(rows);\n        const rowIndex = rowsArray.findIndex(row => row.contains(ev.target));\n\n        if (state[rowIndex] === \"FINISHED\") {\n          el.style.cssText = \"background-color:white color:black\";\n          alert(\"The poll has already finished, choose another team\");\n        } else if (key === 0) {\n          callThis.localSDB(ev.target.textContent, 0);\n          count += 1;\n          return false;\n        } else {\n          callThis.localSDB(ev.target.textContent, 1);\n          count += 1;\n          return false;\n        }\n      });\n    });\n    vote.addEventListener(\"click\", function (e) {\n      if (count <= 1) {\n        alert(\"needed two team to vote\");\n        return false;\n      } else {\n        if (awayEngine > homeEngine) {\n          winner.textContent = \"Away: \" + callThis.state.away;\n          score.textContent = \"Wins\";\n          count = 0;\n        } else if (homeEngine > awayEngine) {\n          winner.textContent = \"Home: \" + callThis.state.home;\n          score.textContent = \"Wins\";\n          count = 0;\n        } else {\n          winner.textContent = \"Team\";\n          score.textContent = \"Draw\";\n          count = 0;\n        }\n      }\n\n      team.forEach(function (el) {\n        el.style.cssText = \"background-color:white; color:black\";\n      });\n      e.stopImmediatePropagation();\n      e.preventDefault();\n    });\n  }\n\n  componentDidMount() {\n    this.executeDBEngine();\n  }\n\n}\n\nexport default SportPoll;","map":{"version":3,"sources":["C:\\Users\\Ayettey\\Desktop\\sportpollv3\\src\\SportPoll.js"],"names":["test","React","SportPoll","Component","constructor","state","away","home","render","view","localSDB","value","teamIndex","Storage","localStorage","setItem","setState","getItem","alert","eventTableData","val","eventItems","document","querySelector","innerHTML","awayName","group","homeName","name","sport","country","createdAt","id","executeDBEngine","eventList","JSON","parse","stringify","shuffle","Math","floor","random","index","valueOf","voteEngine","team","querySelectorAll","teamCss","vote","winner","score","awayEngine","homeEngine","count","callThis","forEach","el","key","addEventListener","ev","style","cssText","preventDefault","stopImmediatePropagation","rows","rowsArray","Array","from","rowIndex","findIndex","row","contains","target","textContent","e","componentDidMount"],"mappings":";AAAA,OAAOA,IAAP,MAAiB,mBAAjB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAIA,MAAMC,SAAN,SAAwBD,KAAK,CAACE,SAA9B,CAAuC;AAEnCC,EAAAA,WAAW,GAAE;AAET;AACA,SAAKC,KAAL,GAAW;AACPC,MAAAA,IAAI,EAAC,EADE;AAEPC,MAAAA,IAAI,EAAC;AAFE,KAAX;AAIH;AAED;;;;AAIA;AACA;;;AACAC,EAAAA,MAAM,GAAE;AAEJ,WAAO,KAAKC,IAAL,EAAP;AACH,GApBkC,CAuBnC;;;AACAA,EAAAA,IAAI,GAAE;AACF,WAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACJ;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqB;AAAM,MAAA,SAAS,EAAC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAArB,EAA0D;AAAM,MAAA,EAAE,EAAC,oBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAA1D,OAAiG;AAAM,MAAA,EAAE,EAAC,OAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAjG,EAA0H;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAsB;AAAO,MAAA,EAAE,EAAC,MAAV;AAAiB,MAAA,IAAI,EAAC,QAAtB;AAA+B,MAAA,KAAK,EAAC,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAtB,CAA1H,CADI,EAEJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEI;AAAO,MAAA,EAAE,EAAC,aAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,EAII;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ,EAQI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARJ,EAaI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAbJ,EAgBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAhBJ,EAmBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAnBJ,EAsBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAtBJ,EAyBI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAzBJ,EA4BI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YA5BJ,CADA,CADJ,CAFJ,CADJ,CAFI,CAAR;AA+CH,GAxEkC,CA2EnC;;;AACAC,EAAAA,QAAQ,CAACC,KAAD,EAAOC,SAAP,EAAiB;AAErB,QAAI,OAAOC,OAAP,KAAoB,WAAxB,EAAqC;AACjC;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BJ,KAA7B,EAFiC,CAGjC;;AAEA,UAAGC,SAAS,KAAG,CAAf,EAAiB;AAEb,aAAKI,QAAL,CAAc;AAACV,UAAAA,IAAI,EAACQ,YAAY,CAACG,OAAb,CAAqB,MAArB;AAAN,SAAd;AAEH,OAJD,MAIM;AAEF,aAAKD,QAAL,CAAc;AAACT,UAAAA,IAAI,EAACO,YAAY,CAACG,OAAb,CAAqB,MAArB;AAAN,SAAd;AACH;AACJ,KAbD,MAaO;AACHC,MAAAA,KAAK,CAAE,qDAAF,CAAL;AACH;AACJ,GA9FkC,CAgGnC;;;AACAC,EAAAA,cAAc,CAACC,GAAD,EAAK;AACf,QAAIC,UAAU,GAACC,QAAQ,CAACC,aAAT,CAAuB,cAAvB,CAAf;AACAF,IAAAA,UAAU,CAACG,SAAX,2GAGOJ,GAAG,CAACK,QAHX,8GAMOL,GAAG,CAACM,KANX,0HAWaN,GAAG,CAACO,QAXjB,2GAeSP,GAAG,CAACQ,IAfb,gGAkBSR,GAAG,CAACS,KAlBb,2FAqBST,GAAG,CAACf,KArBb,+FAwBSe,GAAG,CAACU,OAxBb,gGA2BQV,GAAG,CAACW,SA3BZ,yFA8BWX,GAAG,CAACY,EA9Bf;AAoCH,GAvIkC,CAyInC;;;AAEAC,EAAAA,eAAe,GAAE;AACb,QAAIC,SAAS,GAAC,EAAd;;AACA,QAAI,OAAOrB,OAAP,KAAoB,WAAxB,EAAqC;AACjC;AACAC,MAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA6BoB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAerC,IAAf,CAAX,CAA7B;AAEAkC,MAAAA,SAAS,GAACpB,YAAY,CAACG,OAAb,CAAqB,OAArB,CAAV;AACH;;AAGD,QAAIqB,OAAO,GAACC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBF,IAAI,CAACC,KAAL,CAAW,CAAX,CAA3B,CAAZ;AACA,QAAInC,KAAK,GAAC,EAAV;AACA,QAAIqC,KAAK,GAAC,CAAV;;AAEA,SAAI,IAAItB,GAAR,IAAec,SAAf,EAAyB;AAGrB,UAAGI,OAAO,CAACK,OAAR,OAAoB,CAApB,IAAyBvB,GAAG,CAACS,KAAJ,KAAY,UAAxC,EAAmD;AAC/C,aAAKV,cAAL,CAAoBC,GAApB;AACAf,QAAAA,KAAK,CAACqC,KAAD,CAAL,GAAatB,GAAG,CAACf,KAAjB;AACA,UAAEqC,KAAF;AAGH,OAND,MAMO,IAAGJ,OAAO,CAACK,OAAR,OAAoB,CAApB,IAAyBvB,GAAG,CAACS,KAAJ,KAAY,SAAxC,EAAkD;AACrD,aAAKV,cAAL,CAAoBC,GAApB;AACAf,QAAAA,KAAK,CAACqC,KAAD,CAAL,GAAatB,GAAG,CAACf,KAAjB;AACA,UAAEqC,KAAF;AAGH,OANM,MAMC,IAAGJ,OAAO,CAACK,OAAR,OAAoB,CAApB,IAAyBvB,GAAG,CAACS,KAAJ,KAAY,UAAxC,EAAmD;AACvD,aAAKV,cAAL,CAAoBC,GAApB;AACAf,QAAAA,KAAK,CAACqC,KAAD,CAAL,GAAatB,GAAG,CAACf,KAAjB;AACA,UAAEqC,KAAF;AAGH,OANO,MAMF,IAAGJ,OAAO,CAACK,OAAR,OAAoB,CAApB,IAAyBvB,GAAG,CAACS,KAAJ,KAAY,YAAxC,EAAqD;AACvD,aAAKV,cAAL,CAAoBC,GAApB;AACAf,QAAAA,KAAK,CAACqC,KAAD,CAAL,GAAatB,GAAG,CAACf,KAAjB;AACA,UAAEqC,KAAF;AAGH,OANK,MAMA,IAAGJ,OAAO,CAACK,OAAR,OAAoB,CAApB,IAAyBvB,GAAG,CAACS,KAAJ,KAAY,QAAxC,EAAiD;AACnD,aAAKV,cAAL,CAAoBC,GAApB;AACAf,QAAAA,KAAK,CAACqC,KAAD,CAAL,GAAatB,GAAG,CAACf,KAAjB;AACA,UAAEqC,KAAF;AAEH;AAMJ;;AAED,SAAKE,UAAL,CAAgBvC,KAAhB;AACH,GAlMkC,CAoMnC;;;AACAuC,EAAAA,UAAU,CAACvC,KAAD,EAAO;AACb,QAAIwC,IAAI,GAACvB,QAAQ,CAACwB,gBAAT,CAA0B,OAA1B,CAAT;AACA,QAAIC,OAAO,GAAC,qCAAZ;AACA,QAAIC,IAAI,GAAC1B,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAT;AACA,QAAI0B,MAAM,GAAC3B,QAAQ,CAACC,aAAT,CAAuB,qBAAvB,CAAX;AACA,QAAI2B,KAAK,GAAC5B,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAV;AACA,QAAI4B,UAAJ;AACA,QAAIC,UAAJ;AACA,QAAIC,KAAK,GAAC,CAAV;AACA,QAAIC,QAAQ,GAAC,IAAb;AAGAT,IAAAA,IAAI,CAACU,OAAL,CAAa,UAAUC,EAAV,EAAaC,GAAb,EAAkB;AAE3BD,MAAAA,EAAE,CAACE,gBAAH,CAAoB,OAApB,EAA4B,UAAUC,EAAV,EAAc;AACtCH,QAAAA,EAAE,CAACI,KAAH,CAASC,OAAT,GAAiBd,OAAjB;AACAY,QAAAA,EAAE,CAACG,cAAH;AACAH,QAAAA,EAAE,CAACI,wBAAH;AACAZ,QAAAA,UAAU,GAACZ,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBF,IAAI,CAACC,KAAL,CAAW,CAAX,CAA3B,CAAX;AACAY,QAAAA,UAAU,GAACb,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBF,IAAI,CAACC,KAAL,CAAW,CAAX,CAA3B,CAAX;AACA,cAAMwB,IAAI,GAAG1C,QAAQ,CAACwB,gBAAT,CAA0B,IAA1B,CAAb;AACA,cAAMmB,SAAS,GAAGC,KAAK,CAACC,IAAN,CAAWH,IAAX,CAAlB;AACA,cAAMI,QAAQ,GAAGH,SAAS,CAACI,SAAV,CAAoBC,GAAG,IAAIA,GAAG,CAACC,QAAJ,CAAaZ,EAAE,CAACa,MAAhB,CAA3B,CAAjB;;AAGA,YAAGnE,KAAK,CAAC+D,QAAD,CAAL,KAAkB,UAArB,EAAgC;AAE5BZ,UAAAA,EAAE,CAACI,KAAH,CAASC,OAAT,GAAiB,oCAAjB;AACA3C,UAAAA,KAAK,CAAC,oDAAD,CAAL;AACH,SAJD,MAIO,IAAGuC,GAAG,KAAG,CAAT,EAAW;AAEdH,UAAAA,QAAQ,CAAC5C,QAAT,CAAkBiD,EAAE,CAACa,MAAH,CAAUC,WAA5B,EAAwC,CAAxC;AACApB,UAAAA,KAAK,IAAE,CAAP;AACA,iBAAO,KAAP;AAEH,SANM,MAMD;AAEFC,UAAAA,QAAQ,CAAC5C,QAAT,CAAkBiD,EAAE,CAACa,MAAH,CAAUC,WAA5B,EAAwC,CAAxC;AACApB,UAAAA,KAAK,IAAE,CAAP;AACA,iBAAO,KAAP;AACH;AAEJ,OA5BD;AAgCH,KAlCD;AAoCAL,IAAAA,IAAI,CAACU,gBAAL,CAAsB,OAAtB,EAA8B,UAAUgB,CAAV,EAAa;AACvC,UAAGrB,KAAK,IAAE,CAAV,EAAY;AACRnC,QAAAA,KAAK,CAAC,yBAAD,CAAL;AACA,eAAO,KAAP;AACH,OAHD,MAGM;AACF,YAAGiC,UAAU,GAACC,UAAd,EAAyB;AACrBH,UAAAA,MAAM,CAACwB,WAAP,GAAmB,WAASnB,QAAQ,CAACjD,KAAT,CAAeC,IAA3C;AACA4C,UAAAA,KAAK,CAACuB,WAAN,GAAkB,MAAlB;AACApB,UAAAA,KAAK,GAAC,CAAN;AACH,SAJD,MAIO,IAAGD,UAAU,GAACD,UAAd,EAA0B;AAC7BF,UAAAA,MAAM,CAACwB,WAAP,GAAmB,WAASnB,QAAQ,CAACjD,KAAT,CAAeE,IAA3C;AACA2C,UAAAA,KAAK,CAACuB,WAAN,GAAkB,MAAlB;AACApB,UAAAA,KAAK,GAAC,CAAN;AAEH,SALM,MAKD;AACFJ,UAAAA,MAAM,CAACwB,WAAP,GAAmB,MAAnB;AACAvB,UAAAA,KAAK,CAACuB,WAAN,GAAkB,MAAlB;AACApB,UAAAA,KAAK,GAAC,CAAN;AACH;AAEJ;;AACDR,MAAAA,IAAI,CAACU,OAAL,CAAa,UAAUC,EAAV,EAAc;AAEvBA,QAAAA,EAAE,CAACI,KAAH,CAASC,OAAT,GAAiB,qCAAjB;AACH,OAHD;AAKAa,MAAAA,CAAC,CAACX,wBAAF;AACAW,MAAAA,CAAC,CAACZ,cAAF;AACH,KA5BD;AAkCH;;AACDa,EAAAA,iBAAiB,GAAG;AAChB,SAAK1C,eAAL;AAGH;;AA5RkC;;AAgSvC,eAAe/B,SAAf","sourcesContent":["import test from \"./test-assignment\";\r\nimport React from 'react'\r\n\r\n\r\n\r\nclass SportPoll extends React.Component{\r\n\r\n    constructor(){\r\n\r\n        super();\r\n        this.state={\r\n            away:\"\",\r\n            home:\"\",\r\n        }\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {*}\r\n     */\r\n    // Execution point for sport poll view;\r\n    // The render is inherit from React Component for rendering Element\r\n    render(){\r\n\r\n        return this.view();\r\n    }\r\n\r\n\r\n    // The view function is function that display event object\r\n    view(){\r\n        return (<div>\r\n            <div className=\"bar\"><span className=\"title\">Event </span><span id=\"teams_place_holder\"> </span> <span id=\"score\"> </span><div className=\"vote\"><input id=\"vote\" type=\"button\" value=\"Vote\"/></div></div>\r\n            <div>\r\n                <div className='sport_event'>\r\n\r\n                    <table id=\"event_items\">\r\n                        <tbody>\r\n                        <tr>\r\n                            <th>\r\n                                Away\r\n                            </th>\r\n                            <th>\r\n                                Home\r\n                            </th>\r\n\r\n                            <th>\r\n                                Name\r\n                            </th>\r\n\r\n\r\n                            <th>\r\n                                Group\r\n                            </th>\r\n                            <th>\r\n                                Sport\r\n                            </th>\r\n                            <th>\r\n                                State\r\n                            </th>\r\n                            <th>\r\n                                Country\r\n                            </th>\r\n                            <th>\r\n                                Created date\r\n                            </th>\r\n                            <th>\r\n                                ID\r\n                            </th>\r\n                        </tr>\r\n                        </tbody>\r\n\r\n\r\n\r\n                    </table>\r\n                </div>\r\n            </div>\r\n        </div>);\r\n    }\r\n\r\n\r\n    //Store data in local storage\r\n    localSDB(value,teamIndex){\r\n\r\n        if (typeof(Storage) !== \"undefined\") {\r\n            // Store\r\n            localStorage.setItem(\"team\", value);\r\n            // Retrieve\r\n\r\n            if(teamIndex===0){\r\n\r\n                this.setState({away:localStorage.getItem(\"team\")})\r\n\r\n            }else {\r\n\r\n                this.setState({home:localStorage.getItem(\"team\")})\r\n            }\r\n        } else {\r\n            alert( \"Sorry, your browser does not support Web Storage...\");\r\n        }\r\n    }\r\n\r\n    // The Event table data function query for Event data.\r\n    eventTableData(val){\r\n        let eventItems=document.querySelector(\"#event_items\");\r\n        eventItems.innerHTML+=`\r\n          <tr>\r\n          <td title=\"click to select Away\" class=\"team\">\r\n             ${val.awayName}\r\n          </td>\r\n          <td title=\"click to select Home\" class = \"team\" >\r\n             ${val.group}\r\n         \r\n              </td>\r\n              \r\n               <td class = \"group\" >\r\n                   ${val.homeName}\r\n              </td>\r\n               \r\n               <td class = \"name\" >\r\n               ${val.name}\r\n              </td>\r\n               <td class = \"sport_type\" >\r\n               ${val.sport}\r\n              </td>\r\n               <td class = \"state\" >\r\n               ${val.state}\r\n              </td>\r\n               <td class = \"home_name\" >\r\n               ${val.country}\r\n              </td>\r\n               <td class = \"create_date\" >\r\n              ${val.createdAt}\r\n              </td>\r\n              <td class = \"id\" >\r\n                 ${val.id}\r\n              </td>\r\n             \r\n          </tr>\r\n      \r\n          `\r\n    }\r\n\r\n    //The execute database engine function query and prepare statement for the eventTableData function;\r\n\r\n    executeDBEngine(){\r\n        var eventList=\"\";\r\n        if (typeof(Storage) !== \"undefined\") {\r\n            // Store\r\n            localStorage.setItem(\"polls\",JSON.parse(JSON.stringify(test)));\r\n\r\n            eventList=localStorage.getItem(\"polls\");\r\n        }\r\n\r\n\r\n        let shuffle=Math.floor(Math.random() * Math.floor(5));\r\n        var state=[];\r\n        let index=1;\r\n\r\n        for(let val of eventList){\r\n\r\n\r\n            if(shuffle.valueOf()===0 && val.sport===\"FOOTBALL\"){\r\n                this.eventTableData(val);\r\n                state[index]=val.state;\r\n                ++index;\r\n\r\n\r\n            }else  if(shuffle.valueOf()===1 && val.sport===\"SNOOKER\"){\r\n                this.eventTableData(val);\r\n                state[index]=val.state;\r\n                ++index;\r\n\r\n\r\n            } else  if(shuffle.valueOf()===2 && val.sport===\"HANDBALL\"){\r\n                this.eventTableData(val);\r\n                state[index]=val.state;\r\n                ++index;\r\n\r\n\r\n            }else if(shuffle.valueOf()===3 && val.sport===\"ICE_HOCKEY\"){\r\n                this.eventTableData(val);\r\n                state[index]=val.state;\r\n                ++index;\r\n\r\n\r\n            }else if(shuffle.valueOf()===4 && val.sport===\"TENNIS\"){\r\n                this.eventTableData(val);\r\n                state[index]=val.state;\r\n                ++index;\r\n\r\n            }\r\n\r\n\r\n\r\n\r\n\r\n        }\r\n\r\n        this.voteEngine(state);\r\n    }\r\n\r\n    //The vote engine determines the poll winner or draw\r\n    voteEngine(state){\r\n        let team=document.querySelectorAll(\".team\");\r\n        let teamCss=\"background-color:green; color:white\";\r\n        let vote=document.querySelector(\"#vote\");\r\n        let winner=document.querySelector(\"#teams_place_holder\");\r\n        let score=document.querySelector(\"#score\");\r\n        var awayEngine;\r\n        var homeEngine;\r\n        let count=0;\r\n        let callThis=this;\r\n\r\n\r\n        team.forEach(function (el,key) {\r\n\r\n            el.addEventListener(\"click\",function (ev) {\r\n                el.style.cssText=teamCss;\r\n                ev.preventDefault();\r\n                ev.stopImmediatePropagation();\r\n                awayEngine=Math.floor(Math.random() * Math.floor(5));\r\n                homeEngine=Math.floor(Math.random() * Math.floor(5));\r\n                const rows = document.querySelectorAll('tr');\r\n                const rowsArray = Array.from(rows);\r\n                const rowIndex = rowsArray.findIndex(row => row.contains(ev.target));\r\n\r\n\r\n                if(state[rowIndex]===\"FINISHED\"){\r\n\r\n                    el.style.cssText=\"background-color:white color:black\";\r\n                    alert(\"The poll has already finished, choose another team\" )\r\n                } else if(key===0){\r\n\r\n                    callThis.localSDB(ev.target.textContent,0);\r\n                    count+=1;\r\n                    return false;\r\n\r\n                }else {\r\n\r\n                    callThis.localSDB(ev.target.textContent,1);\r\n                    count+=1;\r\n                    return false;\r\n                }\r\n\r\n            });\r\n\r\n\r\n\r\n        });\r\n\r\n        vote.addEventListener(\"click\",function (e) {\r\n            if(count<=1){\r\n                alert(\"needed two team to vote\");\r\n                return false;\r\n            }else {\r\n                if(awayEngine>homeEngine){\r\n                    winner.textContent=\"Away: \"+callThis.state.away;\r\n                    score.textContent=\"Wins\";\r\n                    count=0;\r\n                }else  if(homeEngine>awayEngine) {\r\n                    winner.textContent=\"Home: \"+callThis.state.home;\r\n                    score.textContent=\"Wins\";\r\n                    count=0;\r\n\r\n                }else {\r\n                    winner.textContent=\"Team\";\r\n                    score.textContent=\"Draw\";\r\n                    count=0;\r\n                }\r\n\r\n            }\r\n            team.forEach(function (el) {\r\n\r\n                el.style.cssText=\"background-color:white; color:black\";\r\n            });\r\n\r\n            e.stopImmediatePropagation();\r\n            e.preventDefault();\r\n        });\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n    componentDidMount() {\r\n        this.executeDBEngine();\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\nexport default SportPoll\r\n"]},"metadata":{},"sourceType":"module"}